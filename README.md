# CarRental - Платформа аренды автомобилей

Платформа для аренды автомобилей между частными лицами и таксопарками с системой рейтингов, отзывов, споров и аналитики.

## Установка и запуск

1. Клонируйте репозиторий
2. Установите зависимости: `composer install`
3. Скопируйте `.env.example` в `.env` и настройте базу данных
4. Запустите миграции: `php artisan migrate:fresh --seed`
5. Создайте тестовых пользователей: `php artisan create:test-users`
6. Запустите сервер: `php artisan serve`

## Тестовые пользователи

Для демонстрации функциональности созданы два тестовых пользователя:

### Арендодатель (владелец автомобилей)

-   **Email:** owner@test.com
-   **Пароль:** password
-   **Telegram:** @ivan_owner
-   **Описание:** Иван Петров, владеет 2 автомобилями (Toyota Camry, Honda CR-V)

### Арендатор (клиент)

-   **Email:** renter@test.com
-   **Пароль:** password
-   **Telegram:** @anna_renter
-   **Описание:** Анна Сидорова, арендовала 5 автомобилей

## Функциональность

### Для пользователей

-   Регистрация и авторизация
-   Просмотр каталога автомобилей
-   Подача заявок на аренду
-   Общение в чатах с поддержкой медиафайлов
-   Система отзывов и рейтингов
-   Подача и ведение споров
-   Личный кабинет с историей
-   Работа с таксопарками

### Для таксопарков

-   Регистрация таксопарка
-   Управление автопарком
-   Получение отзывов и рейтингов
-   Верификация аккаунта

### Для администраторов

-   Управление пользователями через Filament
-   Модерация объявлений и таксопарков
-   Просмотр аналитики и событий
-   Управление спорами
-   Мониторинг сообщений

## Технологии

-   **Backend:** Laravel 12
-   **Frontend:** Blade + Tailwind CSS 4 + Alpine.js
-   **Admin Panel:** Filament 3
-   **Database:** MySQL
-   **Queue:** Laravel Horizon
-   **PDF:** DomPDF
-   **PWA:** Service Worker + Manifest

## Структура проекта

```
app/
├── Filament/Resources/     # Админ-панель
├── Http/Controllers/       # Контроллеры
├── Models/                 # Модели Eloquent
│   └── Traits/            # Трейты для моделей
├── Enums/                 # Перечисления
├── Services/              # Сервисы
└── Console/Commands/      # Артизан команды

resources/views/
├── components/            # Blade компоненты
├── layouts/              # Шаблоны страниц
├── auth/                 # Страницы авторизации
├── profile/              # Личный кабинет
└── pages/                # Статические страницы
```

## Основные модели

-   **Client** - пользователи системы
-   **TaxiCompany** - таксопарки
-   **Car** - автомобили для аренды (принадлежат клиентам или таксопаркам)
-   **Deal** - сделки аренды
-   **Chat** - чаты между пользователями
-   **ConversationMessage** - универсальная система сообщений
-   **Review** - отзывы и рейтинги
-   **Dispute** - споры между пользователями
-   **Event** - события для аналитики
-   **City** - города
-   **Notification** - уведомления

## Новые возможности

### Таксопарки

-   Поддержка регистрации таксопарков
-   Верификация аккаунтов
-   Управление автопарком
-   Отдельные рейтинги и отзывы

### Универсальная система сообщений

-   Поддержка чатов и споров
-   Медиафайлы (фото, видео, документы)
-   Системные сообщения
-   Трейт HasConversationMessages

### Аналитика

-   Система событий для отслеживания действий
-   Админ-панель с фильтрами и статистикой

### Генерация контрактов

-   Автоматическая генерация PDF контрактов
-   Команда для создания контрактов

## PWA функции

-   Установка на главный экран
-   Push-уведомления
-   Офлайн режим
-   Быстрый доступ

## Разработка

### Команды

-   `php artisan create:test-users` - создать тестовых пользователей
-   `php artisan migrate:fresh --seed` - пересоздать БД с демо-данными
-   `php artisan generate:contract` - сгенерировать контракт
-   `composer dev` - запуск всех сервисов разработки

### Вход в админ-панель

-   URL: `/admin`
-   Email: admin@carrental.com
-   Пароль: password

## TODO

-   [ ] Реальная аутентификация через Laravel Auth
-   [ ] Интеграция с Telegram Bot API
-   [ ] Загрузка и хранение фотографий
-   [ ] Система платежей
-   [ ] Push-уведомления
-   [ ] Мобильное приложение
-   [ ] API для мобильного приложения
-   [ ] Система рефералов
-   [ ] Интеграция с картами
